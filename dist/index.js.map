{"version":3,"sources":["../src/index.tsx","../src/literals/index.ts","../src/components/index.tsx","../src/modules/dom.ts","../src/modules/helpers.tsx","../src/modules/step.ts","../src/defaults.ts","../src/styles.ts","../src/modules/store.ts","../src/components/Overlay.tsx","../src/components/Spotlight.tsx","../src/components/Portal.tsx","../src/components/Step.tsx","../src/modules/scope.ts","../src/components/Beacon.tsx","../src/components/Tooltip/index.tsx","../src/components/Tooltip/Container.tsx","../src/components/Tooltip/CloseButton.tsx"],"sourcesContent":["export * from './literals';\r\n\r\n// eslint-disable-next-line no-restricted-exports\r\nexport { default } from './components';\r\nexport * from './types';\r\n","export const ACTIONS = {\r\n  INIT: 'init',\r\n  START: 'start',\r\n  STOP: 'stop',\r\n  RESET: 'reset',\r\n  PREV: 'prev',\r\n  NEXT: 'next',\r\n  GO: 'go',\r\n  CLOSE: 'close',\r\n  SKIP: 'skip',\r\n  UPDATE: 'update',\r\n} as const;\r\n\r\nexport const EVENTS = {\r\n  TOUR_START: 'tour:start',\r\n  STEP_BEFORE: 'step:before',\r\n  BEACON: 'beacon',\r\n  TOOLTIP: 'tooltip',\r\n  STEP_AFTER: 'step:after',\r\n  TOUR_END: 'tour:end',\r\n  TOUR_STATUS: 'tour:status',\r\n  TARGET_NOT_FOUND: 'error:target_not_found',\r\n  ERROR: 'error',\r\n} as const;\r\n\r\nexport const LIFECYCLE = {\r\n  INIT: 'init',\r\n  READY: 'ready',\r\n  BEACON: 'beacon',\r\n  TOOLTIP: 'tooltip',\r\n  COMPLETE: 'complete',\r\n  ERROR: 'error',\r\n} as const;\r\n\r\nexport const ORIGIN = {\r\n  BUTTON_CLOSE: 'button_close',\r\n  BUTTON_PRIMARY: 'button_primary',\r\n  KEYBOARD: 'keyboard',\r\n  OVERLAY: 'overlay',\r\n} as const;\r\n\r\nexport const STATUS = {\r\n  IDLE: 'idle',\r\n  READY: 'ready',\r\n  WAITING: 'waiting',\r\n  RUNNING: 'running',\r\n  PAUSED: 'paused',\r\n  SKIPPED: 'skipped',\r\n  FINISHED: 'finished',\r\n  ERROR: 'error',\r\n} as const;\r\n","import * as React from 'react';\r\nimport { ReactNode } from 'react';\r\nimport isEqual from '@gilbarbara/deep-equal';\r\nimport is from 'is-lite';\r\nimport treeChanges from 'tree-changes';\r\n\r\nimport {\r\n  canUseDOM,\r\n  getElement,\r\n  getScrollParent,\r\n  getScrollTo,\r\n  hasCustomScrollParent,\r\n  scrollTo,\r\n} from '~/modules/dom';\r\nimport { log, shouldScroll } from '~/modules/helpers';\r\nimport { getMergedStep, validateSteps } from '~/modules/step';\r\nimport createStore from '~/modules/store';\r\n\r\nimport { ACTIONS, EVENTS, LIFECYCLE, STATUS } from '~/literals';\r\n\r\nimport Overlay from '~/components/Overlay';\r\nimport Portal from '~/components/Portal';\r\n\r\nimport { defaultProps } from '~/defaults';\r\nimport { Actions, CallBackProps, Props, State, Status, StoreHelpers } from '~/types';\r\n\r\nimport Step from './Step';\r\n\r\nclass Joyride extends React.Component<Props, State> {\r\n  private readonly helpers: StoreHelpers;\r\n  private readonly store: ReturnType<typeof createStore>;\r\n\r\n  static defaultProps = defaultProps;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n\r\n    const { debug, getHelpers, run = true, stepIndex } = props;\r\n\r\n    this.store = createStore({\r\n      ...props,\r\n      controlled: run && is.number(stepIndex),\r\n    });\r\n    this.helpers = this.store.getHelpers();\r\n\r\n    const { addListener } = this.store;\r\n\r\n    log({\r\n      title: 'init',\r\n      data: [\r\n        { key: 'props', value: this.props },\r\n        { key: 'state', value: this.state },\r\n      ],\r\n      debug,\r\n    });\r\n\r\n    // Sync the store to this component's state.\r\n    addListener(this.syncState);\r\n\r\n    if (getHelpers) {\r\n      getHelpers(this.helpers);\r\n    }\r\n\r\n    this.state = this.store.getState();\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!canUseDOM()) {\r\n      return;\r\n    }\r\n\r\n    const { debug, disableCloseOnEsc, run, steps } = this.props;\r\n    const { start } = this.store;\r\n\r\n    if (validateSteps(steps, debug) && run) {\r\n      start();\r\n    }\r\n\r\n    if (!disableCloseOnEsc) {\r\n      document.body.addEventListener('keydown', this.handleKeyboard, { passive: true });\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(previousProps: Props, previousState: State) {\r\n    if (!canUseDOM()) {\r\n      return;\r\n    }\r\n\r\n    const { action, controlled, index, status } = this.state;\r\n    const { debug, run, stepIndex, steps } = this.props;\r\n    const { stepIndex: previousStepIndex, steps: previousSteps } = previousProps;\r\n    const { reset, setSteps, start, stop, update } = this.store;\r\n    const { changed: changedProps } = treeChanges(previousProps, this.props);\r\n    const { changed, changedFrom } = treeChanges(previousState, this.state);\r\n    const step = getMergedStep(this.props, steps[index]);\r\n\r\n    const stepsChanged = !isEqual(previousSteps, steps);\r\n    const stepIndexChanged = is.number(stepIndex) && changedProps('stepIndex');\r\n    const target = getElement(step.target);\r\n\r\n    if (stepsChanged) {\r\n      if (validateSteps(steps, debug)) {\r\n        setSteps(steps);\r\n      } else {\r\n        // eslint-disable-next-line no-console\r\n        console.warn('Steps are not valid', steps);\r\n      }\r\n    }\r\n\r\n    if (changedProps('run')) {\r\n      if (run) {\r\n        start(stepIndex);\r\n      } else {\r\n        stop();\r\n      }\r\n    }\r\n\r\n    if (stepIndexChanged) {\r\n      let nextAction: Actions =\r\n        is.number(previousStepIndex) && previousStepIndex < stepIndex ? ACTIONS.NEXT : ACTIONS.PREV;\r\n\r\n      if (action === ACTIONS.STOP) {\r\n        nextAction = ACTIONS.START;\r\n      }\r\n\r\n      if (!([STATUS.FINISHED, STATUS.SKIPPED] as Array<Status>).includes(status)) {\r\n        update({\r\n          action: action === ACTIONS.CLOSE ? ACTIONS.CLOSE : nextAction,\r\n          index: stepIndex,\r\n          lifecycle: LIFECYCLE.INIT,\r\n        });\r\n      }\r\n    }\r\n\r\n    // Update the index if the first step is not found\r\n    if (!controlled && status === STATUS.RUNNING && index === 0 && !target) {\r\n      this.store.update({ index: index + 1 });\r\n      this.callback({\r\n        ...this.state,\r\n        type: EVENTS.TARGET_NOT_FOUND,\r\n        step,\r\n      });\r\n    }\r\n\r\n    const callbackData = {\r\n      ...this.state,\r\n      index,\r\n      step,\r\n    };\r\n    const isAfterAction = changed('action', [\r\n      ACTIONS.NEXT,\r\n      ACTIONS.PREV,\r\n      ACTIONS.SKIP,\r\n      ACTIONS.CLOSE,\r\n    ]);\r\n\r\n    if (isAfterAction && changed('status', STATUS.PAUSED)) {\r\n      const previousStep = getMergedStep(this.props, steps[previousState.index]);\r\n\r\n      this.callback({\r\n        ...callbackData,\r\n        index: previousState.index,\r\n        lifecycle: LIFECYCLE.COMPLETE,\r\n        step: previousStep,\r\n        type: EVENTS.STEP_AFTER,\r\n      });\r\n    }\r\n\r\n    if (changed('status', [STATUS.FINISHED, STATUS.SKIPPED])) {\r\n      const previousStep = getMergedStep(this.props, steps[previousState.index]);\r\n\r\n      if (!controlled) {\r\n        this.callback({\r\n          ...callbackData,\r\n          index: previousState.index,\r\n          lifecycle: LIFECYCLE.COMPLETE,\r\n          step: previousStep,\r\n          type: EVENTS.STEP_AFTER,\r\n        });\r\n      }\r\n\r\n      this.callback({\r\n        ...callbackData,\r\n        type: EVENTS.TOUR_END,\r\n        // Return the last step when the tour is finished\r\n        step: previousStep,\r\n        index: previousState.index,\r\n      });\r\n      reset();\r\n    } else if (changedFrom('status', [STATUS.IDLE, STATUS.READY], STATUS.RUNNING)) {\r\n      this.callback({\r\n        ...callbackData,\r\n        type: EVENTS.TOUR_START,\r\n      });\r\n    } else if (changed('status') || changed('action', ACTIONS.RESET)) {\r\n      this.callback({\r\n        ...callbackData,\r\n        type: EVENTS.TOUR_STATUS,\r\n      });\r\n    }\r\n\r\n    this.scrollToStep(previousState);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { disableCloseOnEsc } = this.props;\r\n\r\n    if (!disableCloseOnEsc) {\r\n      document.body.removeEventListener('keydown', this.handleKeyboard);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Trigger the callback.\r\n   */\r\n  callback = (data: CallBackProps) => {\r\n    const { callback } = this.props;\r\n\r\n    if (is.function(callback)) {\r\n      callback(data);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Keydown event listener\r\n   */\r\n  handleKeyboard = (event: KeyboardEvent) => {\r\n    const { index, lifecycle } = this.state;\r\n    const { steps } = this.props;\r\n    const step = steps[index];\r\n\r\n    if (lifecycle === LIFECYCLE.TOOLTIP) {\r\n      if (event.code === 'Escape' && step && !step.disableCloseOnEsc) {\r\n        this.store.close('keyboard');\r\n      }\r\n    }\r\n  };\r\n\r\n  handleClickOverlay = () => {\r\n    const { index } = this.state;\r\n    const { steps } = this.props;\r\n\r\n    const step = getMergedStep(this.props, steps[index]);\r\n\r\n    if (!step.disableOverlayClose) {\r\n      this.helpers.close('overlay');\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Sync the store with the component's state\r\n   */\r\n  syncState = (state: State) => {\r\n    this.setState(state);\r\n  };\r\n\r\n  scrollToStep(previousState: State) {\r\n    const { index, lifecycle, status } = this.state;\r\n    const {\r\n      debug,\r\n      disableScrollParentFix = false,\r\n      scrollDuration,\r\n      scrollOffset = 20,\r\n      scrollToFirstStep = false,\r\n      steps,\r\n    } = this.props;\r\n    const step = getMergedStep(this.props, steps[index]);\r\n\r\n    const target = getElement(step.target);\r\n    const shouldScrollToStep = shouldScroll({\r\n      isFirstStep: index === 0,\r\n      lifecycle,\r\n      previousLifecycle: previousState.lifecycle,\r\n      scrollToFirstStep,\r\n      step,\r\n      target,\r\n    });\r\n\r\n    if (status === STATUS.RUNNING && shouldScrollToStep) {\r\n      const hasCustomScroll = hasCustomScrollParent(target, disableScrollParentFix);\r\n      const scrollParent = getScrollParent(target, disableScrollParentFix);\r\n      let scrollY = Math.floor(getScrollTo(target, scrollOffset, disableScrollParentFix)) || 0;\r\n\r\n      log({\r\n        title: 'scrollToStep',\r\n        data: [\r\n          { key: 'index', value: index },\r\n          { key: 'lifecycle', value: lifecycle },\r\n          { key: 'status', value: status },\r\n        ],\r\n        debug,\r\n      });\r\n\r\n      const beaconPopper = this.store.getPopper('beacon');\r\n      const tooltipPopper = this.store.getPopper('tooltip');\r\n\r\n      if (lifecycle === LIFECYCLE.BEACON && beaconPopper) {\r\n        const placement = beaconPopper.state.placement;\r\n        const popperRect = beaconPopper.state.elements.popper.getBoundingClientRect();\r\n\r\n        if (!['bottom'].includes(placement) && !hasCustomScroll) {\r\n          scrollY = Math.floor(popperRect.top - scrollOffset);\r\n        }\r\n      } else if (lifecycle === LIFECYCLE.TOOLTIP && tooltipPopper) {\r\n        const placement = tooltipPopper.state.placement;\r\n        const popperRect = tooltipPopper.state.elements.popper.getBoundingClientRect();\r\n        const flipped = tooltipPopper.state.modifiersData.flip?.hasFlipped;\r\n\r\n        if (['top', 'right', 'left'].includes(placement) && !flipped && !hasCustomScroll) {\r\n          scrollY = Math.floor(popperRect.top - scrollOffset);\r\n        } else {\r\n          scrollY -= step.spotlightPadding;\r\n        }\r\n      }\r\n\r\n      scrollY = scrollY >= 0 ? scrollY : 0;\r\n\r\n      if (status === STATUS.RUNNING) {\r\n        scrollTo(scrollY, { element: scrollParent as Element, duration: scrollDuration }).then(\r\n          () => {\r\n            setTimeout(() => {\r\n              this.store.getPopper('tooltip')?.update();\r\n            }, 10);\r\n          },\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!canUseDOM()) {\r\n      return null;\r\n    }\r\n\r\n    const { index, lifecycle, status } = this.state;\r\n    const {\r\n      continuous = false,\r\n      debug = false,\r\n      nonce,\r\n      scrollToFirstStep = false,\r\n      steps,\r\n    } = this.props;\r\n    const isRunning = status === STATUS.RUNNING;\r\n    const content: Record<string, ReactNode> = {};\r\n\r\n    if (isRunning && steps[index]) {\r\n      const step = getMergedStep(this.props, steps[index]);\r\n\r\n      content.step = (\r\n        <Step\r\n          {...this.state}\r\n          callback={this.callback}\r\n          continuous={continuous}\r\n          debug={debug}\r\n          helpers={this.helpers}\r\n          nonce={nonce}\r\n          shouldScroll={!step.disableScrolling && (index !== 0 || scrollToFirstStep)}\r\n          step={step}\r\n          store={this.store}\r\n        />\r\n      );\r\n\r\n      content.overlay = (\r\n        <Portal id=\"react-joyride-portal\">\r\n          <Overlay\r\n            {...step}\r\n            continuous={continuous}\r\n            debug={debug}\r\n            lifecycle={lifecycle}\r\n            onClickOverlay={this.handleClickOverlay}\r\n          />\r\n        </Portal>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"react-joyride\">\r\n        {content.step}\r\n        {content.overlay}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Joyride;\r\n","import scroll from 'scroll';\r\nimport scrollParent from 'scrollparent';\r\n\r\nexport function canUseDOM() {\r\n  return !!(typeof window !== 'undefined' && window.document?.createElement);\r\n}\r\n\r\n/**\r\n * Find the bounding client rect\r\n */\r\nexport function getClientRect(element: HTMLElement | null) {\r\n  if (!element) {\r\n    return null;\r\n  }\r\n\r\n  return element.getBoundingClientRect();\r\n}\r\n\r\n/**\r\n * Helper function to get the browser-normalized \"document height\"\r\n */\r\nexport function getDocumentHeight(median = false): number {\r\n  const { body, documentElement } = document;\r\n\r\n  if (!body || !documentElement) {\r\n    return 0;\r\n  }\r\n\r\n  if (median) {\r\n    const heights = [\r\n      body.scrollHeight,\r\n      body.offsetHeight,\r\n      documentElement.clientHeight,\r\n      documentElement.scrollHeight,\r\n      documentElement.offsetHeight,\r\n    ].sort((a, b) => a - b);\r\n    const middle = Math.floor(heights.length / 2);\r\n\r\n    if (heights.length % 2 === 0) {\r\n      return (heights[middle - 1] + heights[middle]) / 2;\r\n    }\r\n\r\n    return heights[middle];\r\n  }\r\n\r\n  return Math.max(\r\n    body.scrollHeight,\r\n    body.offsetHeight,\r\n    documentElement.clientHeight,\r\n    documentElement.scrollHeight,\r\n    documentElement.offsetHeight,\r\n  );\r\n}\r\n\r\n/**\r\n * Find and return the target DOM element based on a step's 'target'.\r\n */\r\nexport function getElement(element: string | HTMLElement): HTMLElement | null {\r\n  if (typeof element === 'string') {\r\n    try {\r\n      return document.querySelector(element);\r\n    } catch (error: any) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        // eslint-disable-next-line no-console\r\n        console.error(error);\r\n      }\r\n\r\n      return null;\r\n    }\r\n  }\r\n\r\n  return element;\r\n}\r\n\r\n/**\r\n *  Get computed style property\r\n */\r\nexport function getStyleComputedProperty(el: HTMLElement): CSSStyleDeclaration | null {\r\n  if (!el || el.nodeType !== 1) {\r\n    return null;\r\n  }\r\n\r\n  return getComputedStyle(el);\r\n}\r\n\r\n/**\r\n * Get scroll parent with fix\r\n */\r\nexport function getScrollParent(\r\n  element: HTMLElement | null,\r\n  skipFix: boolean,\r\n  forListener?: boolean,\r\n) {\r\n  if (!element) {\r\n    return scrollDocument();\r\n  }\r\n\r\n  const parent = scrollParent(element) as HTMLElement;\r\n\r\n  if (parent) {\r\n    if (parent.isSameNode(scrollDocument())) {\r\n      if (forListener) {\r\n        return document;\r\n      }\r\n\r\n      return scrollDocument();\r\n    }\r\n\r\n    const hasScrolling = parent.scrollHeight > parent.offsetHeight;\r\n\r\n    if (!hasScrolling && !skipFix) {\r\n      parent.style.overflow = 'initial';\r\n\r\n      return scrollDocument();\r\n    }\r\n  }\r\n\r\n  return parent;\r\n}\r\n\r\n/**\r\n * Check if the element has custom scroll parent\r\n */\r\nexport function hasCustomScrollParent(element: HTMLElement | null, skipFix: boolean): boolean {\r\n  if (!element) {\r\n    return false;\r\n  }\r\n\r\n  const parent = getScrollParent(element, skipFix);\r\n\r\n  return parent ? !parent.isSameNode(scrollDocument()) : false;\r\n}\r\n\r\n/**\r\n * Check if the element has custom offset parent\r\n */\r\nexport function hasCustomOffsetParent(element: HTMLElement): boolean {\r\n  return element.offsetParent !== document.body;\r\n}\r\n\r\n/**\r\n * Check if an element has fixed/sticky position\r\n */\r\nexport function hasPosition(el: HTMLElement | Node | null, type: string = 'fixed'): boolean {\r\n  if (!el || !(el instanceof HTMLElement)) {\r\n    return false;\r\n  }\r\n\r\n  const { nodeName } = el;\r\n  const styles = getStyleComputedProperty(el);\r\n\r\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\r\n    return false;\r\n  }\r\n\r\n  if (styles && styles.position === type) {\r\n    return true;\r\n  }\r\n\r\n  if (!el.parentNode) {\r\n    return false;\r\n  }\r\n\r\n  return hasPosition(el.parentNode, type);\r\n}\r\n\r\n/**\r\n * Check if the element is visible\r\n */\r\nexport function isElementVisible(element: HTMLElement): element is HTMLElement {\r\n  if (!element) {\r\n    return false;\r\n  }\r\n\r\n  let parentElement: HTMLElement | null = element;\r\n\r\n  while (parentElement) {\r\n    if (parentElement === document.body) {\r\n      break;\r\n    }\r\n\r\n    if (parentElement instanceof HTMLElement) {\r\n      const { display, visibility } = getComputedStyle(parentElement);\r\n\r\n      if (display === 'none' || visibility === 'hidden') {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    parentElement = parentElement.parentElement ?? null;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Find and return the target DOM element based on a step's 'target'.\r\n */\r\nexport function getElementPosition(\r\n  element: HTMLElement | null,\r\n  offset: number,\r\n  skipFix: boolean,\r\n): number {\r\n  const elementRect = getClientRect(element);\r\n  const parent = getScrollParent(element, skipFix);\r\n  const hasScrollParent = hasCustomScrollParent(element, skipFix);\r\n  const isFixedTarget = hasPosition(element);\r\n  let parentTop = 0;\r\n  let top = elementRect?.top ?? 0;\r\n\r\n  if (hasScrollParent && isFixedTarget) {\r\n    const offsetTop = element?.offsetTop ?? 0;\r\n    const parentScrollTop = (parent as HTMLElement)?.scrollTop ?? 0;\r\n\r\n    top = offsetTop - parentScrollTop;\r\n  } else if (parent instanceof HTMLElement) {\r\n    parentTop = parent.scrollTop;\r\n\r\n    if (!hasScrollParent && !hasPosition(element)) {\r\n      top += parentTop;\r\n    }\r\n\r\n    if (!parent.isSameNode(scrollDocument())) {\r\n      top += scrollDocument().scrollTop;\r\n    }\r\n  }\r\n\r\n  return Math.floor(top - offset);\r\n}\r\n\r\n/**\r\n * Get the scrollTop position\r\n */\r\nexport function getScrollTo(element: HTMLElement | null, offset: number, skipFix: boolean): number {\r\n  if (!element) {\r\n    return 0;\r\n  }\r\n\r\n  const { offsetTop = 0, scrollTop = 0 } = scrollParent(element) ?? {};\r\n  let top = element.getBoundingClientRect().top + scrollTop;\r\n\r\n  if (!!offsetTop && (hasCustomScrollParent(element, skipFix) || hasCustomOffsetParent(element))) {\r\n    top -= offsetTop;\r\n  }\r\n\r\n  const output = Math.floor(top - offset);\r\n\r\n  return output < 0 ? 0 : output;\r\n}\r\n\r\nexport function scrollDocument(): Element | HTMLElement {\r\n  return document.scrollingElement ?? document.documentElement;\r\n}\r\n\r\n/**\r\n * Scroll to position\r\n */\r\nexport function scrollTo(\r\n  value: number,\r\n  options: { duration?: number; element: Element | HTMLElement },\r\n): Promise<void> {\r\n  const { duration, element } = options;\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const { scrollTop } = element;\r\n\r\n    const limit = value > scrollTop ? value - scrollTop : scrollTop - value;\r\n\r\n    scroll.top(element as HTMLElement, value, { duration: limit < 100 ? 50 : duration }, error => {\r\n      if (error && error.message !== 'Element already at target scroll position') {\r\n        return reject(error);\r\n      }\r\n\r\n      return resolve();\r\n    });\r\n  });\r\n}\r\n","import { cloneElement, FC, isValidElement, ReactElement, ReactNode } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport innerText from 'react-innertext';\r\nimport is from 'is-lite';\r\n\r\nimport { LIFECYCLE } from '~/literals';\r\n\r\nimport { AnyObject, Lifecycle, NarrowPlainObject, Step } from '~/types';\r\n\r\nimport { hasPosition } from './dom';\r\n\r\ninterface GetReactNodeTextOptions {\r\n  defaultValue?: any;\r\n  step?: number;\r\n  steps?: number;\r\n}\r\n\r\ninterface LogOptions {\r\n  /** The data to be logged */\r\n  data: any;\r\n  /** display the log */\r\n  debug?: boolean;\r\n  /** The title the logger was called from */\r\n  title: string;\r\n  /** If true, the message will be a warning */\r\n  warn?: boolean;\r\n}\r\n\r\ninterface ShouldScrollOptions {\r\n  isFirstStep: boolean;\r\n  lifecycle: Lifecycle;\r\n  previousLifecycle: Lifecycle;\r\n  scrollToFirstStep: boolean;\r\n  step: Step;\r\n  target: HTMLElement | null;\r\n}\r\n\r\nexport const isReact16 = createPortal !== undefined;\r\n\r\n/**\r\n * Get the current browser\r\n */\r\nexport function getBrowser(userAgent: string = navigator.userAgent): string {\r\n  let browser = userAgent;\r\n\r\n  if (typeof window === 'undefined') {\r\n    browser = 'node';\r\n  }\r\n  // @ts-expect-error IE support\r\n  else if (document.documentMode) {\r\n    browser = 'ie';\r\n  } else if (/Edge/.test(userAgent)) {\r\n    browser = 'edge';\r\n  }\r\n  // @ts-expect-error Opera 8.0+\r\n  else if (Boolean(window.opera) || userAgent.includes(' OPR/')) {\r\n    browser = 'opera';\r\n  }\r\n  // @ts-expect-error Firefox 1.0+\r\n  else if (typeof window.InstallTrigger !== 'undefined') {\r\n    browser = 'firefox';\r\n  }\r\n  // @ts-expect-error Chrome 1+\r\n  else if (window.chrome) {\r\n    browser = 'chrome';\r\n  }\r\n  // Safari (and Chrome iOS, Firefox iOS)\r\n  else if (/(Version\\/([\\d._]+).*Safari|CriOS|FxiOS| Mobile\\/)/.test(userAgent)) {\r\n    browser = 'safari';\r\n  }\r\n\r\n  return browser;\r\n}\r\n\r\n/**\r\n * Get Object type\r\n */\r\nexport function getObjectType(value: unknown): string {\r\n  return Object.prototype.toString.call(value).slice(8, -1).toLowerCase();\r\n}\r\n\r\nexport function getReactNodeText(input: ReactNode, options: GetReactNodeTextOptions = {}): string {\r\n  const { defaultValue, step, steps } = options;\r\n  let text = innerText(input);\r\n\r\n  if (!text) {\r\n    if (\r\n      isValidElement(input) &&\r\n      !Object.values(input.props as Record<string, unknown>).length &&\r\n      getObjectType(input.type) === 'function'\r\n    ) {\r\n      const component = (input.type as FC)({});\r\n\r\n      text = getReactNodeText(component as ReactNode, options);\r\n    } else {\r\n      text = innerText(defaultValue);\r\n    }\r\n  } else if ((text.includes('{step}') || text.includes('{steps}')) && step && steps) {\r\n    text = text.replace('{step}', step.toString()).replace('{steps}', steps.toString());\r\n  }\r\n\r\n  return text;\r\n}\r\n\r\nexport function hasValidKeys(object: Record<string, unknown>, keys?: Array<string>): boolean {\r\n  if (!is.plainObject(object) || !is.array(keys)) {\r\n    return false;\r\n  }\r\n\r\n  return Object.keys(object).every(d => keys.includes(d));\r\n}\r\n\r\n/**\r\n * Convert hex to RGB\r\n */\r\nexport function hexToRGB(hex: string): Array<number> {\r\n  const shorthandRegex = /^#?([\\da-f])([\\da-f])([\\da-f])$/i;\r\n  const properHex = hex.replace(shorthandRegex, (_m, r, g, b) => r + r + g + g + b + b);\r\n\r\n  const result = /^#?([\\da-f]{2})([\\da-f]{2})([\\da-f]{2})$/i.exec(properHex);\r\n\r\n  return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)] : [];\r\n}\r\n\r\n/**\r\n * Decide if the step shouldn't skip the beacon\r\n * @param {Object} step\r\n *\r\n * @returns {boolean}\r\n */\r\nexport function hideBeacon(step: Step): boolean {\r\n  return step.disableBeacon || step.placement === 'center';\r\n}\r\n\r\n/**\r\n * Detect legacy browsers\r\n *\r\n * @returns {boolean}\r\n */\r\nexport function isLegacy(): boolean {\r\n  return !['chrome', 'safari', 'firefox', 'opera'].includes(getBrowser());\r\n}\r\n\r\n/**\r\n * Log method calls if debug is enabled\r\n */\r\nexport function log({ data, debug = false, title, warn = false }: LogOptions) {\r\n  /* eslint-disable no-console */\r\n  const logFn = warn ? console.warn || console.error : console.log;\r\n\r\n  if (debug) {\r\n    if (title && data) {\r\n      console.groupCollapsed(\r\n        `%creact-joyride: ${title}`,\r\n        'color: #ff0044; font-weight: bold; font-size: 12px;',\r\n      );\r\n\r\n      if (Array.isArray(data)) {\r\n        data.forEach(d => {\r\n          if (is.plainObject(d) && d.key) {\r\n            logFn.apply(console, [d.key, d.value]);\r\n          } else {\r\n            logFn.apply(console, [d]);\r\n          }\r\n        });\r\n      } else {\r\n        logFn.apply(console, [data]);\r\n      }\r\n\r\n      console.groupEnd();\r\n    } else {\r\n      console.error('Missing title or data props');\r\n    }\r\n  }\r\n  /* eslint-enable */\r\n}\r\n\r\n/**\r\n * A function that does nothing.\r\n */\r\nexport function noop() {\r\n  return undefined;\r\n}\r\n\r\n/**\r\n * Type-safe Object.keys()\r\n */\r\nexport function objectKeys<T extends AnyObject>(input: T) {\r\n  return Object.keys(input) as Array<keyof T>;\r\n}\r\n\r\n/**\r\n * Remove properties from an object\r\n */\r\nexport function omit<T extends Record<string, any>, K extends keyof T>(\r\n  input: NarrowPlainObject<T>,\r\n  ...filter: K[]\r\n) {\r\n  if (!is.plainObject(input)) {\r\n    throw new TypeError('Expected an object');\r\n  }\r\n\r\n  const output: any = {};\r\n\r\n  for (const key in input) {\r\n    /* istanbul ignore else */\r\n    if ({}.hasOwnProperty.call(input, key)) {\r\n      if (!filter.includes(key as unknown as K)) {\r\n        output[key] = input[key];\r\n      }\r\n    }\r\n  }\r\n\r\n  return output as Omit<T, K>;\r\n}\r\n\r\n/**\r\n * Select properties from an object\r\n */\r\nexport function pick<T extends Record<string, any>, K extends keyof T>(\r\n  input: NarrowPlainObject<T>,\r\n  ...filter: K[]\r\n) {\r\n  if (!is.plainObject(input)) {\r\n    throw new TypeError('Expected an object');\r\n  }\r\n\r\n  if (!filter.length) {\r\n    return input;\r\n  }\r\n\r\n  const output: any = {};\r\n\r\n  for (const key in input) {\r\n    /* istanbul ignore else */\r\n    if ({}.hasOwnProperty.call(input, key)) {\r\n      if (filter.includes(key as unknown as K)) {\r\n        output[key] = input[key];\r\n      }\r\n    }\r\n  }\r\n\r\n  return output as Pick<T, K>;\r\n}\r\n\r\nexport function replaceLocaleContent(input: ReactNode, step: number, steps: number): ReactNode {\r\n  const replacer = (text: string) =>\r\n    text.replace('{step}', String(step)).replace('{steps}', String(steps));\r\n\r\n  if (getObjectType(input) === 'string') {\r\n    return replacer(input as string);\r\n  }\r\n\r\n  if (!isValidElement(input)) {\r\n    return input;\r\n  }\r\n\r\n  const { children } = input.props as { children?: ReactNode };\r\n\r\n  if (getObjectType(children) === 'string' && (children as string).includes('{step}')) {\r\n    return cloneElement(input as ReactElement, {\r\n      children: replacer(children as string),\r\n    } as any);\r\n  }\r\n\r\n  if (Array.isArray(children)) {\r\n    return cloneElement(input as ReactElement, {\r\n      children: children.map((child: ReactNode) => {\r\n        if (typeof child === 'string') {\r\n          return replacer(child);\r\n        }\r\n\r\n        return replaceLocaleContent(child, step, steps);\r\n      }),\r\n    } as any);\r\n  }\r\n\r\n  if (getObjectType(input.type) === 'function' && !Object.values(input.props as Record<string, unknown>).length) {\r\n    const component = (input.type as FC)({});\r\n\r\n    return replaceLocaleContent(component as ReactNode, step, steps);\r\n  }\r\n\r\n  return input;\r\n}\r\n\r\nexport function shouldScroll(options: ShouldScrollOptions): boolean {\r\n  const { isFirstStep, lifecycle, previousLifecycle, scrollToFirstStep, step, target } = options;\r\n\r\n  return (\r\n    !step.disableScrolling &&\r\n    (!isFirstStep || scrollToFirstStep || lifecycle === LIFECYCLE.TOOLTIP) &&\r\n    step.placement !== 'center' &&\r\n    (!step.isFixed || !hasPosition(target)) && // fixed steps don't need to scroll\r\n    previousLifecycle !== lifecycle &&\r\n    ([LIFECYCLE.BEACON, LIFECYCLE.TOOLTIP] as Array<Lifecycle>).includes(lifecycle)\r\n  );\r\n}\r\n\r\n/**\r\n * Block execution\r\n */\r\nexport function sleep(seconds = 1) {\r\n  return new Promise(resolve => {\r\n    setTimeout(resolve, seconds * 1000);\r\n  });\r\n}\r\n","import { Props as FloaterProps } from 'react-floater';\r\nimport deepmerge from 'deepmerge';\r\nimport is from 'is-lite';\r\nimport { SetRequired } from 'type-fest';\r\n\r\nimport { defaultFloaterProps, defaultLocale, defaultStep } from '~/defaults';\r\nimport getStyles from '~/styles';\r\nimport { Props, Step, StepMerged } from '~/types';\r\n\r\nimport { getElement, hasCustomScrollParent } from './dom';\r\nimport { log, omit, pick } from './helpers';\r\n\r\nfunction getTourProps(props: Props) {\r\n  return pick(\r\n    props,\r\n    'beaconComponent',\r\n    'disableCloseOnEsc',\r\n    'disableOverlay',\r\n    'disableOverlayClose',\r\n    'disableScrolling',\r\n    'disableScrollParentFix',\r\n    'floaterProps',\r\n    'hideBackButton',\r\n    'hideCloseButton',\r\n    'locale',\r\n    'showProgress',\r\n    'showSkipButton',\r\n    'spotlightClicks',\r\n    'spotlightPadding',\r\n    'styles',\r\n    'tooltipComponent',\r\n  );\r\n}\r\n\r\nexport function getMergedStep(props: Props, currentStep?: Step): StepMerged {\r\n  const step = currentStep ?? {};\r\n  const mergedStep = deepmerge.all([defaultStep, getTourProps(props), step], {\r\n    isMergeableObject: is.plainObject,\r\n  }) as StepMerged;\r\n\r\n  const mergedStyles = getStyles(props, mergedStep);\r\n  const scrollParent = hasCustomScrollParent(\r\n    getElement(mergedStep.target),\r\n    mergedStep.disableScrollParentFix,\r\n  );\r\n  const floaterProps = deepmerge.all([\r\n    defaultFloaterProps,\r\n    props.floaterProps ?? {},\r\n    mergedStep.floaterProps ?? {},\r\n  ]) as SetRequired<FloaterProps, 'wrapperOptions'>;\r\n\r\n  // Set react-floater props\r\n  floaterProps.offset = mergedStep.offset;\r\n  floaterProps.styles = deepmerge(floaterProps.styles ?? {}, mergedStyles.floaterStyles);\r\n\r\n  floaterProps.offset += props.spotlightPadding ?? mergedStep.spotlightPadding ?? 0;\r\n\r\n  if (mergedStep.placementBeacon && floaterProps.wrapperOptions) {\r\n    floaterProps.wrapperOptions.placement = mergedStep.placementBeacon;\r\n  }\r\n\r\n  if (scrollParent && floaterProps.modifiers?.preventOverflow) {\r\n    floaterProps.modifiers.preventOverflow.options = {\r\n      ...floaterProps.modifiers.preventOverflow.options,\r\n      boundary: 'clippingParents',\r\n    };\r\n  }\r\n\r\n  return {\r\n    ...mergedStep,\r\n    locale: deepmerge.all([defaultLocale, props.locale ?? {}, mergedStep.locale || {}]),\r\n    floaterProps,\r\n    styles: omit(mergedStyles, 'floaterStyles'),\r\n  };\r\n}\r\n\r\n/**\r\n * Validate if a step is valid\r\n */\r\nexport function validateStep(step: Step, debug: boolean = false): boolean {\r\n  if (!is.plainObject(step)) {\r\n    log({\r\n      title: 'validateStep',\r\n      data: 'step must be an object',\r\n      warn: true,\r\n      debug,\r\n    });\r\n\r\n    return false;\r\n  }\r\n\r\n  if (!step.target) {\r\n    log({\r\n      title: 'validateStep',\r\n      data: 'target is missing from the step',\r\n      warn: true,\r\n      debug,\r\n    });\r\n\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Validate if steps are valid\r\n */\r\nexport function validateSteps(steps: Array<Step>, debug: boolean = false): boolean {\r\n  if (!is.array(steps)) {\r\n    log({\r\n      title: 'validateSteps',\r\n      data: 'steps must be an array',\r\n      warn: true,\r\n      debug,\r\n    });\r\n\r\n    return false;\r\n  }\r\n\r\n  return steps.every(d => validateStep(d, debug));\r\n}\r\n","import { noop } from '~/modules/helpers';\r\n\r\nimport { FloaterProps, Locale, Props, Step } from '~/types';\r\n\r\nexport const defaultFloaterProps: Partial<FloaterProps> = {\r\n  modifiers: {\r\n    preventOverflow: {\r\n      options: {\r\n        boundary: 'clippingParents',\r\n      },\r\n    },\r\n  },\r\n  wrapperOptions: {\r\n    offset: -18,\r\n    position: true,\r\n  },\r\n};\r\n\r\nexport const defaultLocale: Locale = {\r\n  back: 'Back',\r\n  close: 'Close',\r\n  last: 'Last',\r\n  next: 'Next',\r\n  nextLabelWithProgress: 'Next (Step {step} of {steps})',\r\n  open: 'Open the dialog',\r\n  skip: 'Skip',\r\n};\r\n\r\nexport const defaultStep = {\r\n  event: 'click',\r\n  placement: 'bottom',\r\n  offset: 10,\r\n  disableBeacon: false,\r\n  disableCloseOnEsc: false,\r\n  disableOverlay: false,\r\n  disableOverlayClose: false,\r\n  disableScrollParentFix: false,\r\n  disableScrolling: false,\r\n  hideBackButton: false,\r\n  hideCloseButton: false,\r\n  hideFooter: false,\r\n  isFixed: false,\r\n  locale: defaultLocale,\r\n  showProgress: false,\r\n  showSkipButton: false,\r\n  spotlightClicks: false,\r\n  spotlightPadding: 10,\r\n} satisfies Omit<Step, 'content' | 'target'>;\r\n\r\nexport const defaultProps = {\r\n  continuous: false,\r\n  debug: false,\r\n  disableCloseOnEsc: false,\r\n  disableOverlay: false,\r\n  disableOverlayClose: false,\r\n  disableScrolling: false,\r\n  disableScrollParentFix: false,\r\n  getHelpers: noop(),\r\n  hideBackButton: false,\r\n  run: true,\r\n  scrollOffset: 20,\r\n  scrollDuration: 300,\r\n  scrollToFirstStep: false,\r\n  showSkipButton: false,\r\n  showProgress: false,\r\n  spotlightClicks: false,\r\n  spotlightPadding: 10,\r\n  steps: [],\r\n} satisfies Props;\r\n","import deepmerge from 'deepmerge';\r\n\r\nimport { hexToRGB } from './modules/helpers';\r\nimport { Props, StepMerged, StylesOptions, StylesWithFloaterStyles } from './types';\r\n\r\nconst defaultOptions = {\r\n  arrowColor: '#fff',\r\n  backgroundColor: '#fff',\r\n  beaconSize: 36,\r\n  overlayColor: 'rgba(0, 0, 0, 0.5)',\r\n  primaryColor: '#f04',\r\n  spotlightShadow: '0 0 15px rgba(0, 0, 0, 0.5)',\r\n  textColor: '#333',\r\n  width: 380,\r\n  zIndex: 100,\r\n} satisfies StylesOptions;\r\n\r\nconst buttonBase = {\r\n  backgroundColor: 'transparent',\r\n  border: 0,\r\n  borderRadius: 0,\r\n  color: '#555',\r\n  cursor: 'pointer',\r\n  fontSize: 16,\r\n  lineHeight: 1,\r\n  padding: 8,\r\n  WebkitAppearance: 'none',\r\n};\r\n\r\nconst spotlight = {\r\n  borderRadius: 4,\r\n  position: 'absolute',\r\n};\r\n\r\nexport default function getStyles(props: Props, step: StepMerged) {\r\n  const { floaterProps, styles } = props;\r\n  const mergedFloaterProps = deepmerge(step.floaterProps ?? {}, floaterProps ?? {});\r\n  const mergedStyles = deepmerge(styles ?? {}, step.styles ?? {});\r\n  const options = deepmerge(defaultOptions, mergedStyles.options || {}) satisfies StylesOptions;\r\n  const hideBeacon = step.placement === 'center' || step.disableBeacon;\r\n  let { width } = options;\r\n\r\n  if (window.innerWidth > 480) {\r\n    width = 380;\r\n  }\r\n\r\n  if ('width' in options) {\r\n    width =\r\n      typeof options.width === 'number' && window.innerWidth < options.width\r\n        ? window.innerWidth - 30\r\n        : options.width;\r\n  }\r\n\r\n  const overlay = {\r\n    bottom: 0,\r\n    left: 0,\r\n    overflow: 'hidden',\r\n    position: 'absolute',\r\n    right: 0,\r\n    top: 0,\r\n    zIndex: options.zIndex,\r\n  };\r\n\r\n  const defaultStyles = {\r\n    beacon: {\r\n      ...buttonBase,\r\n      display: hideBeacon ? 'none' : 'inline-block',\r\n      height: options.beaconSize,\r\n      position: 'relative',\r\n      width: options.beaconSize,\r\n      zIndex: options.zIndex,\r\n    },\r\n    beaconInner: {\r\n      animation: 'joyride-beacon-inner 1.2s infinite ease-in-out',\r\n      backgroundColor: options.primaryColor,\r\n      borderRadius: '50%',\r\n      display: 'block',\r\n      height: '50%',\r\n      left: '50%',\r\n      opacity: 0.7,\r\n      position: 'absolute',\r\n      top: '50%',\r\n      transform: 'translate(-50%, -50%)',\r\n      width: '50%',\r\n    },\r\n    beaconOuter: {\r\n      animation: 'joyride-beacon-outer 1.2s infinite ease-in-out',\r\n      backgroundColor: `rgba(${hexToRGB(options.primaryColor).join(',')}, 0.2)`,\r\n      border: `2px solid ${options.primaryColor}`,\r\n      borderRadius: '50%',\r\n      boxSizing: 'border-box',\r\n      display: 'block',\r\n      height: '100%',\r\n      left: 0,\r\n      opacity: 0.9,\r\n      position: 'absolute',\r\n      top: 0,\r\n      transformOrigin: 'center',\r\n      width: '100%',\r\n    },\r\n    tooltip: {\r\n      backgroundColor: options.backgroundColor,\r\n      borderRadius: 5,\r\n      boxSizing: 'border-box',\r\n      color: options.textColor,\r\n      fontSize: 16,\r\n      maxWidth: '100%',\r\n      padding: 15,\r\n      position: 'relative',\r\n      width,\r\n    },\r\n    tooltipContainer: {\r\n      lineHeight: 1.4,\r\n      textAlign: 'center',\r\n    },\r\n    tooltipTitle: {\r\n      fontSize: 18,\r\n      margin: 0,\r\n    },\r\n    tooltipContent: {\r\n      padding: '20px 10px',\r\n    },\r\n    tooltipFooter: {\r\n      alignItems: 'center',\r\n      display: 'flex',\r\n      justifyContent: 'flex-end',\r\n      marginTop: 15,\r\n    },\r\n    tooltipFooterSpacer: {\r\n      flex: 1,\r\n    },\r\n    buttonNext: {\r\n      ...buttonBase,\r\n      backgroundColor: options.primaryColor,\r\n      borderRadius: 4,\r\n      color: '#fff',\r\n    },\r\n    buttonBack: {\r\n      ...buttonBase,\r\n      color: options.primaryColor,\r\n      marginLeft: 'auto',\r\n      marginRight: 5,\r\n    },\r\n    buttonClose: {\r\n      ...buttonBase,\r\n      color: options.textColor,\r\n      height: 14,\r\n      padding: 15,\r\n      position: 'absolute',\r\n      right: 0,\r\n      top: 0,\r\n      width: 14,\r\n    },\r\n    buttonSkip: {\r\n      ...buttonBase,\r\n      color: options.textColor,\r\n      fontSize: 14,\r\n    },\r\n    overlay: {\r\n      ...overlay,\r\n      backgroundColor: options.overlayColor,\r\n      mixBlendMode: 'hard-light',\r\n    },\r\n    overlayLegacy: {\r\n      ...overlay,\r\n    },\r\n    overlayLegacyCenter: {\r\n      ...overlay,\r\n      backgroundColor: options.overlayColor,\r\n    },\r\n    spotlight: {\r\n      ...spotlight,\r\n      backgroundColor: 'gray',\r\n    },\r\n    spotlightLegacy: {\r\n      ...spotlight,\r\n      boxShadow: `0 0 0 9999px ${options.overlayColor}, ${options.spotlightShadow}`,\r\n    },\r\n    floaterStyles: {\r\n      arrow: {\r\n        color: mergedFloaterProps?.styles?.arrow?.color ?? options.arrowColor,\r\n      },\r\n      options: {\r\n        zIndex: options.zIndex + 100,\r\n      },\r\n    },\r\n    options,\r\n  };\r\n\r\n  return deepmerge(defaultStyles, mergedStyles) as StylesWithFloaterStyles;\r\n}\r\n","import { Props as FloaterProps } from 'react-floater';\r\nimport is from 'is-lite';\r\n\r\nimport { ACTIONS, LIFECYCLE, STATUS } from '~/literals';\r\n\r\nimport { Origin, State, Status, Step, StoreHelpers, StoreOptions } from '~/types';\r\n\r\nimport { hasValidKeys, objectKeys, omit } from './helpers';\r\n\r\ntype StateWithContinuous = State & { continuous: boolean };\r\ntype Listener = (state: State) => void;\r\ntype PopperData = Parameters<NonNullable<FloaterProps['getPopper']>>[0];\r\n\r\nconst defaultState: State = {\r\n  action: 'init',\r\n  controlled: false,\r\n  index: 0,\r\n  lifecycle: LIFECYCLE.INIT,\r\n  origin: null,\r\n  size: 0,\r\n  status: STATUS.IDLE,\r\n};\r\nconst validKeys = objectKeys(omit(defaultState, 'controlled', 'size'));\r\n\r\nclass Store {\r\n  private beaconPopper: PopperData | null;\r\n  private tooltipPopper: PopperData | null;\r\n  private data: Map<string, any> = new Map();\r\n  private listener: Listener | null;\r\n  private store: Map<string, any> = new Map();\r\n\r\n  constructor(options?: StoreOptions) {\r\n    const { continuous = false, stepIndex, steps = [] } = options ?? {};\r\n\r\n    this.setState(\r\n      {\r\n        action: ACTIONS.INIT,\r\n        controlled: is.number(stepIndex),\r\n        continuous,\r\n        index: is.number(stepIndex) ? stepIndex : 0,\r\n        lifecycle: LIFECYCLE.INIT,\r\n        origin: null,\r\n        status: steps.length ? STATUS.READY : STATUS.IDLE,\r\n      },\r\n      true,\r\n    );\r\n\r\n    this.beaconPopper = null;\r\n    this.tooltipPopper = null;\r\n    this.listener = null;\r\n    this.setSteps(steps);\r\n  }\r\n\r\n  public getState(): State {\r\n    if (!this.store.size) {\r\n      return { ...defaultState };\r\n    }\r\n\r\n    return {\r\n      action: this.store.get('action') || '',\r\n      controlled: this.store.get('controlled') || false,\r\n      index: parseInt(this.store.get('index'), 10),\r\n      lifecycle: this.store.get('lifecycle') || '',\r\n      origin: this.store.get('origin') || null,\r\n      size: this.store.get('size') || 0,\r\n      status: (this.store.get('status') as Status) || '',\r\n    };\r\n  }\r\n\r\n  private getNextState(state: Partial<State>, force: boolean = false): State {\r\n    const { action, controlled, index, size, status } = this.getState();\r\n    const newIndex = is.number(state.index) ? state.index : index;\r\n    const nextIndex = controlled && !force ? index : Math.min(Math.max(newIndex, 0), size);\r\n\r\n    return {\r\n      action: state.action ?? action,\r\n      controlled,\r\n      index: nextIndex,\r\n      lifecycle: state.lifecycle ?? LIFECYCLE.INIT,\r\n      origin: state.origin ?? null,\r\n      size: state.size ?? size,\r\n      status: nextIndex === size ? STATUS.FINISHED : state.status ?? status,\r\n    };\r\n  }\r\n\r\n  private getSteps(): Array<Step> {\r\n    const steps = this.data.get('steps');\r\n\r\n    return Array.isArray(steps) ? steps : [];\r\n  }\r\n\r\n  private hasUpdatedState(oldState: State): boolean {\r\n    const before = JSON.stringify(oldState);\r\n    const after = JSON.stringify(this.getState());\r\n\r\n    return before !== after;\r\n  }\r\n\r\n  private setState(nextState: Partial<StateWithContinuous>, initial: boolean = false) {\r\n    const state = this.getState();\r\n\r\n    const {\r\n      action,\r\n      index,\r\n      lifecycle,\r\n      origin = null,\r\n      size,\r\n      status,\r\n    } = {\r\n      ...state,\r\n      ...nextState,\r\n    };\r\n\r\n    this.store.set('action', action);\r\n    this.store.set('index', index);\r\n    this.store.set('lifecycle', lifecycle);\r\n    this.store.set('origin', origin);\r\n    this.store.set('size', size);\r\n    this.store.set('status', status);\r\n\r\n    if (initial) {\r\n      this.store.set('controlled', nextState.controlled);\r\n      this.store.set('continuous', nextState.continuous);\r\n    }\r\n\r\n    if (this.listener && this.hasUpdatedState(state)) {\r\n      this.listener(this.getState());\r\n    }\r\n  }\r\n\r\n  public addListener = (listener: Listener) => {\r\n    this.listener = listener;\r\n  };\r\n\r\n  public setSteps = (steps: Array<Step>) => {\r\n    const { size, status } = this.getState();\r\n    const state = {\r\n      size: steps.length,\r\n      status,\r\n    };\r\n\r\n    this.data.set('steps', steps);\r\n\r\n    if (status === STATUS.WAITING && !size && steps.length) {\r\n      state.status = STATUS.RUNNING;\r\n    }\r\n\r\n    this.setState(state);\r\n  };\r\n\r\n  public getHelpers(): StoreHelpers {\r\n    return {\r\n      close: this.close,\r\n      go: this.go,\r\n      info: this.info,\r\n      next: this.next,\r\n      open: this.open,\r\n      prev: this.prev,\r\n      reset: this.reset,\r\n      skip: this.skip,\r\n    };\r\n  }\r\n\r\n  public getPopper = (name: 'beacon' | 'tooltip'): PopperData | null => {\r\n    if (name === 'beacon') {\r\n      return this.beaconPopper;\r\n    }\r\n\r\n    return this.tooltipPopper;\r\n  };\r\n\r\n  public setPopper = (name: 'beacon' | 'tooltip', popper: PopperData) => {\r\n    if (name === 'beacon') {\r\n      this.beaconPopper = popper;\r\n    } else {\r\n      this.tooltipPopper = popper;\r\n    }\r\n  };\r\n\r\n  public cleanupPoppers = () => {\r\n    this.beaconPopper = null;\r\n    this.tooltipPopper = null;\r\n  };\r\n\r\n  public close = (origin: Origin | null = null) => {\r\n    const { index, status } = this.getState();\r\n\r\n    if (status !== STATUS.RUNNING) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      ...this.getNextState({ action: ACTIONS.CLOSE, index: index + 1, origin }),\r\n    });\r\n  };\r\n\r\n  public go = (nextIndex: number) => {\r\n    const { controlled, status } = this.getState();\r\n\r\n    if (controlled || status !== STATUS.RUNNING) {\r\n      return;\r\n    }\r\n\r\n    const step = this.getSteps()[nextIndex];\r\n\r\n    this.setState({\r\n      ...this.getNextState({ action: ACTIONS.GO, index: nextIndex }),\r\n      status: step ? status : STATUS.FINISHED,\r\n    });\r\n  };\r\n\r\n  public info = (): State => this.getState();\r\n\r\n  public next = () => {\r\n    const { index, status } = this.getState();\r\n\r\n    if (status !== STATUS.RUNNING) {\r\n      return;\r\n    }\r\n\r\n    this.setState(this.getNextState({ action: ACTIONS.NEXT, index: index + 1 }));\r\n  };\r\n\r\n  public open = () => {\r\n    const { status } = this.getState();\r\n\r\n    if (status !== STATUS.RUNNING) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      ...this.getNextState({ action: ACTIONS.UPDATE, lifecycle: LIFECYCLE.TOOLTIP }),\r\n    });\r\n  };\r\n\r\n  public prev = () => {\r\n    const { index, status } = this.getState();\r\n\r\n    if (status !== STATUS.RUNNING) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      ...this.getNextState({ action: ACTIONS.PREV, index: index - 1 }),\r\n    });\r\n  };\r\n\r\n  public reset = (restart = false) => {\r\n    const { controlled } = this.getState();\r\n\r\n    if (controlled) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      ...this.getNextState({ action: ACTIONS.RESET, index: 0 }),\r\n      status: restart ? STATUS.RUNNING : STATUS.READY,\r\n    });\r\n  };\r\n\r\n  public skip = () => {\r\n    const { status } = this.getState();\r\n\r\n    if (status !== STATUS.RUNNING) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      action: ACTIONS.SKIP,\r\n      lifecycle: LIFECYCLE.INIT,\r\n      status: STATUS.SKIPPED,\r\n    });\r\n  };\r\n\r\n  public start = (nextIndex?: number) => {\r\n    const { index, size } = this.getState();\r\n\r\n    this.setState({\r\n      ...this.getNextState(\r\n        {\r\n          action: ACTIONS.START,\r\n          index: is.number(nextIndex) ? nextIndex : index,\r\n        },\r\n        true,\r\n      ),\r\n      status: size ? STATUS.RUNNING : STATUS.WAITING,\r\n    });\r\n  };\r\n\r\n  public stop = (advance = false) => {\r\n    const { index, status } = this.getState();\r\n\r\n    if (([STATUS.FINISHED, STATUS.SKIPPED] as Array<Status>).includes(status)) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      ...this.getNextState({ action: ACTIONS.STOP, index: index + (advance ? 1 : 0) }),\r\n      status: STATUS.PAUSED,\r\n    });\r\n  };\r\n\r\n  public update = (state: Partial<State>) => {\r\n    if (!hasValidKeys(state, validKeys)) {\r\n      throw new Error(`State is not valid. Valid keys: ${validKeys.join(', ')}`);\r\n    }\r\n\r\n    this.setState({\r\n      ...this.getNextState(\r\n        {\r\n          ...this.getState(),\r\n          ...state,\r\n          action: state.action ?? ACTIONS.UPDATE,\r\n          origin: state.origin ?? null,\r\n        },\r\n        true,\r\n      ),\r\n    });\r\n  };\r\n}\r\n\r\nexport type StoreInstance = ReturnType<typeof createStore>;\r\n\r\nexport default function createStore(options?: StoreOptions) {\r\n  return new Store(options);\r\n}\r\n","import * as React from 'react';\r\nimport treeChanges from 'tree-changes';\r\n\r\nimport {\r\n  getClientRect,\r\n  getDocumentHeight,\r\n  getElement,\r\n  getElementPosition,\r\n  getScrollParent,\r\n  hasCustomScrollParent,\r\n  hasPosition,\r\n} from '~/modules/dom';\r\nimport { getBrowser, isLegacy, log } from '~/modules/helpers';\r\n\r\nimport { LIFECYCLE } from '~/literals';\r\n\r\nimport { Lifecycle, OverlayProps } from '~/types';\r\n\r\nimport Spotlight from './Spotlight';\r\n\r\ninterface State {\r\n  isScrolling: boolean;\r\n  mouseOverSpotlight: boolean;\r\n  showSpotlight: boolean;\r\n}\r\n\r\ninterface SpotlightStyles extends React.CSSProperties {\r\n  height: number;\r\n  left: number;\r\n  top: number;\r\n  width: number;\r\n}\r\n\r\nexport default class JoyrideOverlay extends React.Component<OverlayProps, State> {\r\n  isActive = false;\r\n  resizeTimeout?: number;\r\n  scrollTimeout?: number;\r\n  scrollParent?: Document | Element;\r\n  state = {\r\n    isScrolling: false,\r\n    mouseOverSpotlight: false,\r\n    showSpotlight: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { debug, disableScrolling, disableScrollParentFix = false, target } = this.props;\r\n    const element = getElement(target);\r\n\r\n    this.scrollParent = getScrollParent(element ?? document.body, disableScrollParentFix, true);\r\n    this.isActive = true;\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (!disableScrolling && hasCustomScrollParent(element, true)) {\r\n        log({\r\n          title: 'step has a custom scroll parent and can cause trouble with scrolling',\r\n          data: [{ key: 'parent', value: this.scrollParent }],\r\n          debug,\r\n        });\r\n      }\r\n    }\r\n\r\n    window.addEventListener('resize', this.handleResize);\r\n  }\r\n\r\n  componentDidUpdate(previousProps: OverlayProps) {\r\n    const { disableScrollParentFix, lifecycle, spotlightClicks, target } = this.props;\r\n    const { changed } = treeChanges(previousProps, this.props);\r\n\r\n    if (changed('target') || changed('disableScrollParentFix')) {\r\n      const element = getElement(target);\r\n\r\n      this.scrollParent = getScrollParent(element ?? document.body, disableScrollParentFix, true);\r\n    }\r\n\r\n    if (changed('lifecycle', LIFECYCLE.TOOLTIP)) {\r\n      this.scrollParent?.addEventListener('scroll', this.handleScroll, { passive: true });\r\n\r\n      setTimeout(() => {\r\n        const { isScrolling } = this.state;\r\n\r\n        if (!isScrolling) {\r\n          this.updateState({ showSpotlight: true });\r\n        }\r\n      }, 100);\r\n    }\r\n\r\n    if (changed('spotlightClicks') || changed('disableOverlay') || changed('lifecycle')) {\r\n      if (spotlightClicks && lifecycle === LIFECYCLE.TOOLTIP) {\r\n        window.addEventListener('mousemove', this.handleMouseMove, false);\r\n      } else if (lifecycle !== LIFECYCLE.TOOLTIP) {\r\n        window.removeEventListener('mousemove', this.handleMouseMove);\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.isActive = false;\r\n\r\n    window.removeEventListener('mousemove', this.handleMouseMove);\r\n    window.removeEventListener('resize', this.handleResize);\r\n\r\n    clearTimeout(this.resizeTimeout);\r\n    clearTimeout(this.scrollTimeout);\r\n    this.scrollParent?.removeEventListener('scroll', this.handleScroll);\r\n  }\r\n\r\n  hideSpotlight = () => {\r\n    const { continuous, disableOverlay, lifecycle } = this.props;\r\n    const hiddenLifecycles = [\r\n      LIFECYCLE.INIT,\r\n      LIFECYCLE.BEACON,\r\n      LIFECYCLE.COMPLETE,\r\n      LIFECYCLE.ERROR,\r\n    ] as Lifecycle[];\r\n\r\n    return (\r\n      disableOverlay ||\r\n      (continuous ? hiddenLifecycles.includes(lifecycle) : lifecycle !== LIFECYCLE.TOOLTIP)\r\n    );\r\n  };\r\n\r\n  get overlayStyles() {\r\n    const { mouseOverSpotlight } = this.state;\r\n    const { disableOverlayClose, placement, styles } = this.props;\r\n\r\n    let baseStyles = styles.overlay;\r\n\r\n    if (isLegacy()) {\r\n      baseStyles = placement === 'center' ? styles.overlayLegacyCenter : styles.overlayLegacy;\r\n    }\r\n\r\n    return {\r\n      cursor: disableOverlayClose ? 'default' : 'pointer',\r\n      height: getDocumentHeight(),\r\n      pointerEvents: mouseOverSpotlight ? 'none' : 'auto',\r\n      ...baseStyles,\r\n    } as React.CSSProperties;\r\n  }\r\n\r\n  get spotlightStyles(): SpotlightStyles {\r\n    const { showSpotlight } = this.state;\r\n    const {\r\n      disableScrollParentFix = false,\r\n      spotlightClicks,\r\n      spotlightPadding = 0,\r\n      styles,\r\n      target,\r\n    } = this.props;\r\n    const element = getElement(target);\r\n    const elementRect = getClientRect(element);\r\n    const isFixedTarget = hasPosition(element);\r\n    const top = getElementPosition(element, spotlightPadding, disableScrollParentFix);\r\n\r\n    return {\r\n      ...(isLegacy() ? styles.spotlightLegacy : styles.spotlight),\r\n      height: Math.round((elementRect?.height ?? 0) + spotlightPadding * 2),\r\n      left: Math.round((elementRect?.left ?? 0) - spotlightPadding),\r\n      opacity: showSpotlight ? 1 : 0,\r\n      pointerEvents: spotlightClicks ? 'none' : 'auto',\r\n      position: isFixedTarget ? 'fixed' : 'absolute',\r\n      top,\r\n      transition: 'opacity 0.2s',\r\n      width: Math.round((elementRect?.width ?? 0) + spotlightPadding * 2),\r\n    } satisfies React.CSSProperties;\r\n  }\r\n\r\n  handleMouseMove = (event: MouseEvent) => {\r\n    const { mouseOverSpotlight } = this.state;\r\n    const { height, left, position, top, width } = this.spotlightStyles;\r\n\r\n    const offsetY = position === 'fixed' ? event.clientY : event.pageY;\r\n    const offsetX = position === 'fixed' ? event.clientX : event.pageX;\r\n    const inSpotlightHeight = offsetY >= top && offsetY <= top + height;\r\n    const inSpotlightWidth = offsetX >= left && offsetX <= left + width;\r\n    const inSpotlight = inSpotlightWidth && inSpotlightHeight;\r\n\r\n    if (inSpotlight !== mouseOverSpotlight) {\r\n      this.updateState({ mouseOverSpotlight: inSpotlight });\r\n    }\r\n  };\r\n\r\n  handleScroll = () => {\r\n    const { target } = this.props;\r\n    const element = getElement(target);\r\n\r\n    if (this.scrollParent !== document) {\r\n      const { isScrolling } = this.state;\r\n\r\n      if (!isScrolling) {\r\n        this.updateState({ isScrolling: true, showSpotlight: false });\r\n      }\r\n\r\n      clearTimeout(this.scrollTimeout);\r\n\r\n      this.scrollTimeout = window.setTimeout(() => {\r\n        this.updateState({ isScrolling: false, showSpotlight: true });\r\n      }, 50);\r\n    } else if (hasPosition(element, 'sticky')) {\r\n      this.updateState({});\r\n    }\r\n  };\r\n\r\n  handleResize = () => {\r\n    clearTimeout(this.resizeTimeout);\r\n\r\n    this.resizeTimeout = window.setTimeout(() => {\r\n      if (!this.isActive) {\r\n        return;\r\n      }\r\n\r\n      this.forceUpdate();\r\n    }, 100);\r\n  };\r\n\r\n  updateState(state: Partial<State>) {\r\n    if (!this.isActive) {\r\n      return;\r\n    }\r\n\r\n    this.setState(previousState => ({ ...previousState, ...state }));\r\n  }\r\n\r\n  render() {\r\n    const { showSpotlight } = this.state;\r\n    const { onClickOverlay, placement } = this.props;\r\n    const { hideSpotlight, overlayStyles, spotlightStyles } = this;\r\n\r\n    if (hideSpotlight()) {\r\n      return null;\r\n    }\r\n\r\n    let spotlight = placement !== 'center' && showSpotlight && (\r\n      <Spotlight styles={spotlightStyles} />\r\n    );\r\n\r\n    // Hack for Safari bug with mix-blend-mode with z-index\r\n    if (getBrowser() === 'safari') {\r\n      const { mixBlendMode, zIndex, ...safariOverlay } = overlayStyles;\r\n\r\n      spotlight = <div style={{ ...safariOverlay }}>{spotlight}</div>;\r\n      delete overlayStyles.backgroundColor;\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className=\"react-joyride__overlay\"\r\n        data-test-id=\"overlay\"\r\n        onClick={onClickOverlay}\r\n        role=\"presentation\"\r\n        style={overlayStyles}\r\n      >\r\n        {spotlight}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\n\r\ninterface Props {\r\n  styles: React.CSSProperties;\r\n}\r\n\r\nfunction JoyrideSpotlight({ styles }: Props) {\r\n  return (\r\n    <div\r\n      key=\"JoyrideSpotlight\"\r\n      className=\"react-joyride__spotlight\"\r\n      data-test-id=\"spotlight\"\r\n      style={styles}\r\n    />\r\n  );\r\n}\r\n\r\nexport default JoyrideSpotlight;\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\n\r\nimport { canUseDOM } from '~/modules/dom';\r\n\r\ninterface Props {\r\n  children: React.ReactElement;\r\n  id: string;\r\n}\r\n\r\nexport default class JoyridePortal extends React.Component<Props> {\r\n  node: HTMLElement | null = null;\r\n\r\n  componentDidMount() {\r\n    const { id } = this.props;\r\n\r\n    if (!canUseDOM()) {\r\n      return;\r\n    }\r\n\r\n    this.node = document.createElement('div');\r\n    this.node.id = id;\r\n\r\n    document.body.appendChild(this.node);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (!canUseDOM() || !this.node) {\r\n      return;\r\n    }\r\n\r\n    if (this.node.parentNode === document.body) {\r\n      document.body.removeChild(this.node);\r\n      this.node = null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (!canUseDOM() || !this.node) {\r\n      return null;\r\n    }\r\n\r\n    const { children } = this.props;\r\n\r\n    return ReactDOM.createPortal(children, this.node);\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport Floater, { Props as FloaterProps } from 'react-floater';\r\nimport is from 'is-lite';\r\nimport treeChanges from 'tree-changes';\r\n\r\ninterface RenderProps {\r\n  closeFn: React.MouseEventHandler;\r\n}\r\n\r\nimport { getElement, isElementVisible } from '~/modules/dom';\r\nimport { hideBeacon, log } from '~/modules/helpers';\r\nimport Scope from '~/modules/scope';\r\nimport { validateStep } from '~/modules/step';\r\n\r\nimport { ACTIONS, EVENTS, LIFECYCLE, STATUS } from '~/literals';\r\n\r\nimport { StepProps } from '~/types';\r\n\r\nimport Beacon from './Beacon';\r\nimport Tooltip from './Tooltip/index';\r\n\r\nexport default class JoyrideStep extends React.Component<StepProps> {\r\n  scope: Scope | null = null;\r\n  tooltip: HTMLElement | null = null;\r\n\r\n  componentDidMount() {\r\n    const { debug, index } = this.props;\r\n\r\n    log({\r\n      title: `step:${index}`,\r\n      data: [{ key: 'props', value: this.props }],\r\n      debug,\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(previousProps: StepProps) {\r\n    const {\r\n      action,\r\n      callback,\r\n      continuous,\r\n      controlled,\r\n      debug,\r\n      helpers,\r\n      index,\r\n      lifecycle,\r\n      shouldScroll,\r\n      status,\r\n      step,\r\n      store,\r\n    } = this.props;\r\n    const { changed, changedFrom } = treeChanges(previousProps, this.props);\r\n    const state = helpers.info();\r\n\r\n    const skipBeacon =\r\n      continuous && action !== ACTIONS.CLOSE && (index > 0 || action === ACTIONS.PREV);\r\n    const hasStoreChanged =\r\n      changed('action') || changed('index') || changed('lifecycle') || changed('status');\r\n    const isInitial = changedFrom('lifecycle', [LIFECYCLE.TOOLTIP, LIFECYCLE.INIT], LIFECYCLE.INIT);\r\n    const isAfterAction = changed('action', [\r\n      ACTIONS.NEXT,\r\n      ACTIONS.PREV,\r\n      ACTIONS.SKIP,\r\n      ACTIONS.CLOSE,\r\n    ]);\r\n    const isControlled = controlled && index === previousProps.index;\r\n\r\n    if (isAfterAction && (isInitial || isControlled)) {\r\n      callback({\r\n        ...state,\r\n        index: previousProps.index,\r\n        lifecycle: LIFECYCLE.COMPLETE,\r\n        step: previousProps.step,\r\n        type: EVENTS.STEP_AFTER,\r\n      });\r\n    }\r\n\r\n    if (\r\n      step.placement === 'center' &&\r\n      status === STATUS.RUNNING &&\r\n      changed('index') &&\r\n      action !== ACTIONS.START &&\r\n      lifecycle === LIFECYCLE.INIT\r\n    ) {\r\n      store.update({ lifecycle: LIFECYCLE.READY });\r\n    }\r\n\r\n    if (hasStoreChanged) {\r\n      const element = getElement(step.target);\r\n      const elementExists = !!element;\r\n      const hasRenderedTarget = elementExists && isElementVisible(element);\r\n\r\n      if (hasRenderedTarget) {\r\n        if (\r\n          changedFrom('status', STATUS.READY, STATUS.RUNNING) ||\r\n          changedFrom('lifecycle', LIFECYCLE.INIT, LIFECYCLE.READY)\r\n        ) {\r\n          callback({\r\n            ...state,\r\n            step,\r\n            type: EVENTS.STEP_BEFORE,\r\n          });\r\n        }\r\n      } else {\r\n        // eslint-disable-next-line no-console\r\n        console.warn(elementExists ? 'Target not visible' : 'Target not mounted', step);\r\n        callback({\r\n          ...state,\r\n          type: EVENTS.TARGET_NOT_FOUND,\r\n          step,\r\n        });\r\n\r\n        if (!controlled) {\r\n          store.update({ index: index + (action === ACTIONS.PREV ? -1 : 1) });\r\n        }\r\n      }\r\n    }\r\n\r\n    if (changedFrom('lifecycle', LIFECYCLE.INIT, LIFECYCLE.READY)) {\r\n      store.update({\r\n        lifecycle: hideBeacon(step) || skipBeacon ? LIFECYCLE.TOOLTIP : LIFECYCLE.BEACON,\r\n      });\r\n    }\r\n\r\n    if (changed('index')) {\r\n      log({\r\n        title: `step:${lifecycle}`,\r\n        data: [{ key: 'props', value: this.props }],\r\n        debug,\r\n      });\r\n    }\r\n\r\n    if (changed('lifecycle', LIFECYCLE.BEACON)) {\r\n      callback({\r\n        ...state,\r\n        step,\r\n        type: EVENTS.BEACON,\r\n      });\r\n    }\r\n\r\n    if (changed('lifecycle', LIFECYCLE.TOOLTIP)) {\r\n      callback({\r\n        ...state,\r\n        step,\r\n        type: EVENTS.TOOLTIP,\r\n      });\r\n\r\n      if (shouldScroll && this.tooltip) {\r\n        this.scope = new Scope(this.tooltip, { selector: '[data-action=primary]' });\r\n        this.scope.setFocus();\r\n      }\r\n    }\r\n\r\n    if (changedFrom('lifecycle', [LIFECYCLE.TOOLTIP, LIFECYCLE.INIT], LIFECYCLE.INIT)) {\r\n      this.scope?.removeScope();\r\n      store.cleanupPoppers();\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.scope?.removeScope();\r\n  }\r\n\r\n  /**\r\n   * Beacon click/hover event listener\r\n   */\r\n  handleClickHoverBeacon = (event: React.MouseEvent<HTMLElement>) => {\r\n    const { step, store } = this.props;\r\n\r\n    if (event.type === 'mouseenter' && step.event !== 'hover') {\r\n      return;\r\n    }\r\n\r\n    store.update({ lifecycle: LIFECYCLE.TOOLTIP });\r\n  };\r\n\r\n  setTooltipRef = (element: HTMLElement) => {\r\n    this.tooltip = element;\r\n  };\r\n\r\n  setPopper: FloaterProps['getPopper'] = (popper, type) => {\r\n    const { action, lifecycle, step, store } = this.props;\r\n\r\n    if (type === 'wrapper') {\r\n      store.setPopper('beacon', popper);\r\n    } else {\r\n      store.setPopper('tooltip', popper);\r\n    }\r\n\r\n    if (\r\n      store.getPopper('beacon') &&\r\n      (store.getPopper('tooltip') || step.placement === 'center') &&\r\n      lifecycle === LIFECYCLE.INIT\r\n    ) {\r\n      store.update({\r\n        action,\r\n        lifecycle: LIFECYCLE.READY,\r\n      });\r\n    }\r\n\r\n    if (step.floaterProps?.getPopper) {\r\n      step.floaterProps.getPopper(popper, type);\r\n    }\r\n  };\r\n\r\n  get open() {\r\n    const { lifecycle, step } = this.props;\r\n\r\n    return hideBeacon(step) || lifecycle === LIFECYCLE.TOOLTIP;\r\n  }\r\n\r\n  renderTooltip = (renderProps: RenderProps) => {\r\n    const { continuous, helpers, index, size, step } = this.props;\r\n\r\n    return (\r\n      <Tooltip\r\n        continuous={continuous}\r\n        helpers={helpers}\r\n        index={index}\r\n        isLastStep={index + 1 === size}\r\n        setTooltipRef={this.setTooltipRef}\r\n        size={size}\r\n        step={step}\r\n        {...renderProps}\r\n      />\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { continuous, debug, index, nonce, shouldScroll, size, step } = this.props;\r\n    const target = getElement(step.target);\r\n\r\n    if (!validateStep(step) || !is.domElement(target)) {\r\n      return null;\r\n    }\r\n\r\n    const { content, ...floaterProps } = step.floaterProps || {};\r\n    \r\n    return (\r\n      <div key={`JoyrideStep-${index}`} className=\"react-joyride__step\">\r\n        <Floater\r\n          {...floaterProps}\r\n          component={this.renderTooltip}\r\n          debug={debug}\r\n          getPopper={this.setPopper}\r\n          id={`react-joyride-step-${index}`}\r\n          open={this.open}\r\n          placement={step.placement}\r\n          target={step.target}\r\n        >\r\n          <Beacon\r\n            beaconComponent={step.beaconComponent}\r\n            continuous={continuous}\r\n            index={index}\r\n            isLastStep={index + 1 === size}\r\n            locale={step.locale}\r\n            nonce={nonce}\r\n            onClickOrHover={this.handleClickHoverBeacon}\r\n            shouldFocus={shouldScroll}\r\n            size={size}\r\n            step={step}\r\n            styles={step.styles}\r\n          />\r\n        </Floater>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","interface ScopeOptions {\r\n  code?: string;\r\n  selector: string | null;\r\n}\r\n\r\nexport default class Scope {\r\n  element: HTMLElement;\r\n  options: ScopeOptions;\r\n\r\n  constructor(element: HTMLElement, options: ScopeOptions) {\r\n    if (!(element instanceof HTMLElement)) {\r\n      throw new TypeError('Invalid parameter: element must be an HTMLElement');\r\n    }\r\n\r\n    this.element = element;\r\n    this.options = options;\r\n\r\n    window.addEventListener('keydown', this.handleKeyDown, false);\r\n\r\n    this.setFocus();\r\n  }\r\n\r\n  canBeTabbed = (element: HTMLElement): boolean => {\r\n    const { tabIndex } = element;\r\n\r\n    if (tabIndex === null || tabIndex < 0) {\r\n      return false;\r\n    }\r\n\r\n    return this.canHaveFocus(element);\r\n  };\r\n\r\n  canHaveFocus = (element: HTMLElement): boolean => {\r\n    const validTabNodes = /input|select|textarea|button|object/;\r\n    const nodeName = element.nodeName.toLowerCase();\r\n\r\n    const isValid =\r\n      (validTabNodes.test(nodeName) && !element.getAttribute('disabled')) ||\r\n      (nodeName === 'a' && !!element.getAttribute('href'));\r\n\r\n    return isValid && this.isVisible(element);\r\n  };\r\n\r\n  findValidTabElements = (): Array<HTMLElement> =>\r\n    [].slice.call(this.element.querySelectorAll('*'), 0).filter(this.canBeTabbed);\r\n\r\n  handleKeyDown = (event: KeyboardEvent) => {\r\n    const { code = 'Tab' } = this.options;\r\n\r\n    if (event.code === code) {\r\n      this.interceptTab(event);\r\n    }\r\n  };\r\n\r\n  interceptTab = (event: KeyboardEvent) => {\r\n    event.preventDefault();\r\n    const elements = this.findValidTabElements();\r\n    const { shiftKey } = event;\r\n\r\n    if (!elements.length) {\r\n      return;\r\n    }\r\n\r\n    let x = document.activeElement ? elements.indexOf(document.activeElement as HTMLElement) : 0;\r\n\r\n    if (x === -1 || (!shiftKey && x + 1 === elements.length)) {\r\n      x = 0;\r\n    } else if (shiftKey && x === 0) {\r\n      x = elements.length - 1;\r\n    } else {\r\n      x += shiftKey ? -1 : 1;\r\n    }\r\n\r\n    elements[x].focus();\r\n  };\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  isHidden = (element: HTMLElement) => {\r\n    const noSize = element.offsetWidth <= 0 && element.offsetHeight <= 0;\r\n    const style = window.getComputedStyle(element);\r\n\r\n    if (noSize && !element.innerHTML) {\r\n      return true;\r\n    }\r\n\r\n    return (\r\n      (noSize && style.getPropertyValue('overflow') !== 'visible') ||\r\n      style.getPropertyValue('display') === 'none'\r\n    );\r\n  };\r\n\r\n  isVisible = (element: HTMLElement): boolean => {\r\n    let parentElement: HTMLElement | null = element;\r\n\r\n    while (parentElement) {\r\n      if (parentElement instanceof HTMLElement) {\r\n        if (parentElement === document.body) {\r\n          break;\r\n        }\r\n\r\n        if (this.isHidden(parentElement)) {\r\n          return false;\r\n        }\r\n\r\n        parentElement = parentElement.parentNode as HTMLElement;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  removeScope = () => {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  };\r\n\r\n  checkFocus = (target: HTMLElement) => {\r\n    if (document.activeElement !== target) {\r\n      target.focus();\r\n      window.requestAnimationFrame(() => this.checkFocus(target));\r\n    }\r\n  };\r\n\r\n  setFocus = () => {\r\n    const { selector } = this.options;\r\n\r\n    if (!selector) {\r\n      return;\r\n    }\r\n\r\n    const target = this.element.querySelector(selector);\r\n\r\n    if (target) {\r\n      window.requestAnimationFrame(() => this.checkFocus(target as HTMLElement));\r\n    }\r\n  };\r\n}\r\n","import * as React from 'react';\r\nimport is from 'is-lite';\r\n\r\nimport { getReactNodeText } from '~/modules/helpers';\r\n\r\nimport { BeaconProps } from '~/types';\r\n\r\nexport default class JoyrideBeacon extends React.Component<BeaconProps> {\r\n  private beacon: HTMLElement | null = null;\r\n\r\n  constructor(props: BeaconProps) {\r\n    super(props);\r\n\r\n    if (props.beaconComponent) {\r\n      return;\r\n    }\r\n\r\n    const head = document.head || document.getElementsByTagName('head')[0];\r\n    const style = document.createElement('style');\r\n\r\n    style.id = 'joyride-beacon-animation';\r\n\r\n    if (props.nonce) {\r\n      style.setAttribute('nonce', props.nonce);\r\n    }\r\n\r\n    const css = `\r\n        @keyframes joyride-beacon-inner {\r\n          20% {\r\n            opacity: 0.9;\r\n          }\r\n        \r\n          90% {\r\n            opacity: 0.7;\r\n          }\r\n        }\r\n        \r\n        @keyframes joyride-beacon-outer {\r\n          0% {\r\n            transform: scale(1);\r\n          }\r\n        \r\n          45% {\r\n            opacity: 0.7;\r\n            transform: scale(0.75);\r\n          }\r\n        \r\n          100% {\r\n            opacity: 0.9;\r\n            transform: scale(1);\r\n          }\r\n        }\r\n      `;\r\n\r\n    style.appendChild(document.createTextNode(css));\r\n\r\n    head.appendChild(style);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { shouldFocus } = this.props;\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (!is.domElement(this.beacon)) {\r\n        console.warn('beacon is not a valid DOM element'); // eslint-disable-line no-console\r\n      }\r\n    }\r\n\r\n    setTimeout(() => {\r\n      if (is.domElement(this.beacon) && shouldFocus) {\r\n        this.beacon.focus();\r\n      }\r\n    }, 0);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const style = document.getElementById('joyride-beacon-animation');\r\n\r\n    if (style?.parentNode) {\r\n      style.parentNode.removeChild(style);\r\n    }\r\n  }\r\n\r\n  setBeaconRef = (c: HTMLElement | null) => {\r\n    this.beacon = c;\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      beaconComponent,\r\n      continuous,\r\n      index,\r\n      isLastStep,\r\n      locale,\r\n      onClickOrHover,\r\n      size,\r\n      step,\r\n      styles,\r\n    } = this.props;\r\n    const title = getReactNodeText(locale.open);\r\n    const sharedProps = {\r\n      'aria-label': title,\r\n      onClick: onClickOrHover,\r\n      onMouseEnter: onClickOrHover,\r\n      ref: this.setBeaconRef,\r\n      title,\r\n    };\r\n    let component;\r\n\r\n    if (beaconComponent) {\r\n      const BeaconComponent = beaconComponent;\r\n\r\n      component = (\r\n        <BeaconComponent\r\n          continuous={continuous}\r\n          index={index}\r\n          isLastStep={isLastStep}\r\n          size={size}\r\n          step={step}\r\n          {...sharedProps}\r\n        />\r\n      );\r\n    } else {\r\n      component = (\r\n        <button\r\n          key=\"JoyrideBeacon\"\r\n          className=\"react-joyride__beacon\"\r\n          data-test-id=\"button-beacon\"\r\n          style={styles.beacon}\r\n          type=\"button\"\r\n          {...sharedProps}\r\n        >\r\n          <span style={styles.beaconInner} />\r\n          <span style={styles.beaconOuter} />\r\n        </button>\r\n      );\r\n    }\r\n\r\n    return component;\r\n  }\r\n}\r\n","import * as React from 'react';\r\n\r\nimport { getReactNodeText, replaceLocaleContent } from '~/modules/helpers';\r\n\r\nimport { TooltipProps } from '~/types';\r\n\r\nimport Container from './Container';\r\n\r\nexport default class JoyrideTooltip extends React.Component<TooltipProps> {\r\n  handleClickBack = (event: React.MouseEvent<HTMLElement>) => {\r\n    event.preventDefault();\r\n    const { helpers } = this.props;\r\n\r\n    helpers.prev();\r\n  };\r\n\r\n  handleClickClose = (event: React.MouseEvent<HTMLElement>) => {\r\n    event.preventDefault();\r\n    const { helpers } = this.props;\r\n\r\n    helpers.close('button_close');\r\n  };\r\n\r\n  handleClickPrimary = (event: React.MouseEvent<HTMLElement>) => {\r\n    event.preventDefault();\r\n    const { continuous, helpers } = this.props;\r\n\r\n    if (!continuous) {\r\n      helpers.close('button_primary');\r\n\r\n      return;\r\n    }\r\n\r\n    helpers.next();\r\n  };\r\n\r\n  handleClickSkip = (event: React.MouseEvent<HTMLElement>) => {\r\n    event.preventDefault();\r\n    const { helpers } = this.props;\r\n\r\n    helpers.skip();\r\n  };\r\n\r\n  getElementsProps = () => {\r\n    const { continuous, index, isLastStep, setTooltipRef, size, step } = this.props;\r\n    const { back, close, last, next, nextLabelWithProgress, skip } = step.locale;\r\n\r\n    const backText = getReactNodeText(back);\r\n    const closeText = getReactNodeText(close);\r\n    const lastText = getReactNodeText(last);\r\n    const nextText = getReactNodeText(next);\r\n    const skipText = getReactNodeText(skip);\r\n\r\n    let primary = close;\r\n    let primaryText = closeText;\r\n\r\n    if (continuous) {\r\n      primary = next;\r\n      primaryText = nextText;\r\n\r\n      if (step.showProgress && !isLastStep) {\r\n        const labelWithProgress = getReactNodeText(nextLabelWithProgress, {\r\n          step: index + 1,\r\n          steps: size,\r\n        });\r\n\r\n        primary = replaceLocaleContent(nextLabelWithProgress, index + 1, size);\r\n        primaryText = labelWithProgress;\r\n      }\r\n\r\n      if (isLastStep) {\r\n        primary = last;\r\n        primaryText = lastText;\r\n      }\r\n    }\r\n\r\n    return {\r\n      backProps: {\r\n        'aria-label': backText,\r\n        children: back,\r\n        'data-action': 'back',\r\n        onClick: this.handleClickBack,\r\n        role: 'button',\r\n        title: backText,\r\n      },\r\n      closeProps: {\r\n        'aria-label': closeText,\r\n        children: close,\r\n        'data-action': 'close',\r\n        onClick: this.handleClickClose,\r\n        role: 'button',\r\n        title: closeText,\r\n      },\r\n      primaryProps: {\r\n        'aria-label': primaryText,\r\n        children: primary,\r\n        'data-action': 'primary',\r\n        onClick: this.handleClickPrimary,\r\n        role: 'button',\r\n        title: primaryText,\r\n      },\r\n      skipProps: {\r\n        'aria-label': skipText,\r\n        children: skip,\r\n        'data-action': 'skip',\r\n        onClick: this.handleClickSkip,\r\n        role: 'button',\r\n        title: skipText,\r\n      },\r\n      tooltipProps: {\r\n        'aria-modal': true,\r\n        ref: setTooltipRef,\r\n        role: 'alertdialog',\r\n      },\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const { continuous, index, isLastStep, setTooltipRef, size, step } = this.props;\r\n    const { beaconComponent, tooltipComponent, ...cleanStep } = step;\r\n    let component;\r\n\r\n    if (tooltipComponent) {\r\n      const renderProps = {\r\n        ...this.getElementsProps(),\r\n        continuous,\r\n        index,\r\n        isLastStep,\r\n        size,\r\n        step: cleanStep,\r\n        setTooltipRef,\r\n      };\r\n\r\n      const TooltipComponent = tooltipComponent;\r\n\r\n      component = <TooltipComponent {...renderProps} />;\r\n    } else {\r\n      component = (\r\n        <Container\r\n          {...this.getElementsProps()}\r\n          continuous={continuous}\r\n          index={index}\r\n          isLastStep={isLastStep}\r\n          size={size}\r\n          step={step}\r\n        />\r\n      );\r\n    }\r\n\r\n    return component;\r\n  }\r\n}\r\n","import * as React from 'react';\r\n\r\nimport { getReactNodeText } from '~/modules/helpers';\r\n\r\nimport { TooltipRenderProps } from '~/types';\r\n\r\nimport CloseButton from './CloseButton';\r\n\r\nfunction JoyrideTooltipContainer(props: TooltipRenderProps) {\r\n  const { backProps, closeProps, index, isLastStep, primaryProps, skipProps, step, tooltipProps } =\r\n    props;\r\n  const { content, hideBackButton, hideCloseButton, hideFooter, showSkipButton, styles, title } =\r\n    step;\r\n  const output: Record<string, React.ReactNode> = {};\r\n\r\n  output.primary = (\r\n    <button\r\n      data-test-id=\"button-primary\"\r\n      style={styles.buttonNext}\r\n      type=\"button\"\r\n      {...primaryProps}\r\n    />\r\n  );\r\n\r\n  if (showSkipButton && !isLastStep) {\r\n    output.skip = (\r\n      <button\r\n        aria-live=\"off\"\r\n        data-test-id=\"button-skip\"\r\n        style={styles.buttonSkip}\r\n        type=\"button\"\r\n        {...skipProps}\r\n      />\r\n    );\r\n  }\r\n\r\n  if (!hideBackButton && index > 0) {\r\n    output.back = (\r\n      <button data-test-id=\"button-back\" style={styles.buttonBack} type=\"button\" {...backProps} />\r\n    );\r\n  }\r\n\r\n  output.close = !hideCloseButton && (\r\n    <CloseButton data-test-id=\"button-close\" styles={styles.buttonClose} {...closeProps} />\r\n  );\r\n\r\n  return (\r\n    <div\r\n      key=\"JoyrideTooltip\"\r\n      aria-label={getReactNodeText(title ?? content)}\r\n      className=\"react-joyride__tooltip\"\r\n      style={styles.tooltip}\r\n      {...tooltipProps}\r\n    >\r\n      <div style={styles.tooltipContainer}>\r\n        {title && (\r\n          <h1 aria-label={getReactNodeText(title)} style={styles.tooltipTitle}>\r\n            {title}\r\n          </h1>\r\n        )}\r\n        <div style={styles.tooltipContent}>{content}</div>\r\n      </div>\r\n      {!hideFooter && (\r\n        <div style={styles.tooltipFooter}>\r\n          <div style={styles.tooltipFooterSpacer}>{output.skip}</div>\r\n          {output.back}\r\n          {output.primary}\r\n        </div>\r\n      )}\r\n      {output.close}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default JoyrideTooltipContainer;\r\n","import React, { CSSProperties } from 'react';\r\n\r\ninterface Props {\r\n  styles: CSSProperties;\r\n}\r\n\r\nfunction JoyrideTooltipCloseButton({ styles, ...props }: Props) {\r\n  const { color, height, width, ...style } = styles;\r\n\r\n  return (\r\n    <button style={style} type=\"button\" {...props}>\r\n      <svg\r\n        height={typeof height === 'number' ? `${height}px` : height}\r\n        preserveAspectRatio=\"xMidYMid\"\r\n        version=\"1.1\"\r\n        viewBox=\"0 0 18 18\"\r\n        width={typeof width === 'number' ? `${width}px` : width}\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n      >\r\n        <g>\r\n          <path\r\n            d=\"M8.13911129,9.00268191 L0.171521827,17.0258467 C-0.0498027049,17.248715 -0.0498027049,17.6098394 0.171521827,17.8327545 C0.28204354,17.9443526 0.427188206,17.9998706 0.572051765,17.9998706 C0.71714958,17.9998706 0.862013139,17.9443526 0.972581703,17.8327545 L9.0000937,9.74924618 L17.0276057,17.8327545 C17.1384085,17.9443526 17.2832721,17.9998706 17.4281356,17.9998706 C17.5729992,17.9998706 17.718097,17.9443526 17.8286656,17.8327545 C18.0499901,17.6098862 18.0499901,17.2487618 17.8286656,17.0258467 L9.86135722,9.00268191 L17.8340066,0.973848225 C18.0553311,0.750979934 18.0553311,0.389855532 17.8340066,0.16694039 C17.6126821,-0.0556467968 17.254037,-0.0556467968 17.0329467,0.16694039 L9.00042166,8.25611765 L0.967006424,0.167268345 C0.745681892,-0.0553188426 0.387317931,-0.0553188426 0.165993399,0.167268345 C-0.0553311331,0.390136635 -0.0553311331,0.751261038 0.165993399,0.974176179 L8.13920499,9.00268191 L8.13911129,9.00268191 Z\"\r\n            fill={color}\r\n          />\r\n        </g>\r\n      </svg>\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default JoyrideTooltipCloseButton;\r\n"],"mappings":"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","names":["React","import_is_lite","import_tree_changes","scrollParent","scroll","innerText","is","import_deepmerge","import_is_lite","deepmerge","hideBeacon","deepmerge","is","scrollParent","import_is_lite","is","React","treeChanges","spotlight","React","React","import_is_lite","import_tree_changes","React","import_is_lite","is","React","React","import_react","React","shouldScroll","treeChanges","is","Floater","is","treeChanges","isEqual","scrollParent","_a"]}